package org.swasth.hcx.controllers.v1;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.http.MediaType;
import org.springframework.mock.web.MockHttpServletResponse;
import org.springframework.test.web.servlet.MvcResult;
import org.swasth.hcx.controllers.BaseSpec;

import java.time.LocalDateTime;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;

public class PayerControllerTests extends BaseSpec {
    @Value("${hcx_application.api_version}")
    private String api_version;

    @Test
    public void payer_request_list_type_coverageEligibility_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        LocalDateTime localDateTime = LocalDateTime.now().plusDays(5);
        long create_don = localDateTime.atZone(java.time.ZoneOffset.systemDefault()).toInstant().toEpochMilli();
        String query = String.format("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'coverageeligibility', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '%s', '1705661715600', '', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '[ { \"documentType\" : \" \", \"urls\" : [\"http://123.com\", \"http://123.com\"  ] } ]', '67545', 'ABCD1234.', 'Abhishek.', 'medical')",create_don);
        postgresService.execute(query);
        String requestBody = getPayerCoverageEligibilityRequestBody();
        MvcResult mvcResult = mockMvc.perform(post( "/payer/request/list").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_request_list__type_preauth_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'preauth', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '...[bill_amount]...', 'ABCD1234.', 'Abhishek.', '...[service_type]...')");
        String requestBody = getPayerPreAuthRequestBody();
        MvcResult mvcResult = mockMvc.perform(post( "/payer/request/list").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_request_list_type_claim_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '...[bill_amount]...', 'ABCD1234.', 'Abhishek.', '...[service_type]...')");
        String requestBody = getPayerClaimRequestBody();
        MvcResult mvcResult = mockMvc.perform(post( "/payer/request/list").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_request_list_type_exception_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '...[bill_amount]...', 'ABCD1234.', 'Abhishek.', '...[service_type]...')");
        String requestBody = getTypeExceptionRequestBody();
        MvcResult mvcResult = mockMvc.perform(post( "/payer/request/list").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(400, status);
    }

    @Test
    public void payer_claim_approve_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '32329', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getClaimApproveSuccess();
        MvcResult mvcResult = mockMvc.perform(post("/payer/claim/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_claim_reject_exception_invalid_type_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '...[bill_amount]...', 'ABCD1234.', 'Abhishek.', '...[service_type]...')");
        String requestBody = getClaimRejectExceptionRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/claim/reject").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(400, status);
    }

    @Test
    public void payer_claim_reject_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '987664543', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getClaimRejectSuccessRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/claim/reject").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_claim_reject_invalid_amount_exception_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', 'jhhdj', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getClaimApproveExceptionRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/claim/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(400, status);
    }

    @Test
    public void payer_preauth_reject_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '987664543', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getPreauthRejectSuccessRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/preauth/reject").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_preauth_approve_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'preauth', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '32329', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getPreauthApproveSuccess();
        MvcResult mvcResult = mockMvc.perform(post("/payer/preauth/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_update_response() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '987664543', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getPayerResponseUpdateRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/response/update").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_coverageeligibility_approve_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'coverageeligibility', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '32329', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getClaimApproveSuccess();
        MvcResult mvcResult = mockMvc.perform(post("/payer/coverageeligibility/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_coverageeligibility_reject_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'coverageeligibility', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w','{}', '{ \"resourceType\": \"Bundle\", \"id\": \"9b0677a9-3672-40af-a402-7522b5ad5e96\", \"meta\": { \"lastUpdated\": \"2024-01-16T15:56:34.178+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityResponseBundle.html\"] }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"5e90f207-7436-4ea1-b190-1863bda30478\" }, \"type\": \"collection\", \"timestamp\": \"2024-01-16T15:56:32.801+00:00\", \"entry\": [ { \"fullUrl\": \"CoverageEligibilityResponse/8b4c3072-06dc-4449-808b-ea2867d36697\", \"resource\": { \"resourceType\": \"CoverageEligibilityResponse\", \"id\": \"8b4c3072-06dc-4449-808b-ea2867d36697\", \"meta\": { \"lastUpdated\": \"2024-01-16T15:56:34.178+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityResponse.html\"] }, \"identifier\": [ { \"system\": \"http://identifiersystem.com\", \"value\": \"IdentifierValue\" } ], \"status\": \"active\", \"purpose\": [\"benefits\"], \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"created\": \"2024-01-16T15:56:34+00:00\", \"requestor\": { \"reference\": \"CoverageEligibilityResponse/WeMeanWell01\" }, \"request\": { \"reference\": \"CoverageEligibilityResponse/dc82673b-8c71-48c2-8a17-16dcb3b035f6\" }, \"outcome\": \"complete\", \"insurer\": { \"reference\": \"CoverageEligibilityResponse/GICOFINDIA\" } } }, { \"fullUrl\": \"CoverageEligibilityResponse/WeMeanWell01\", \"resource\": { \"resourceType\": \"CoverageEligibilityResponse\", \"id\": \"WeMeanWell01\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"Narayana\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" } ], \"name\": \"Demo Assisted BSP\", \"address\": [ { \"text\": \" Bannerghatta Road, Bengaluru \", \"city\": \"Bengaluru\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"CoverageEligibilityResponse/GICOFINDIA\", \"resource\": { \"resourceType\": \"CoverageEligibilityResponse\", \"id\": \"GICOFINDIA\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"GOVOFINDIA\" } ] }, \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"GICOFINDIA\" } ], \"name\": \"Demo Payor\" } }, { \"fullUrl\": \"CoverageEligibilityResponse/RVH1003\", \"resource\": { \"resourceType\": \"CoverageEligibilityResponse\", \"id\": \"RVH1003\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" } ] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" } ], \"name\": [ { \"text\": \"Test-1\" } ], \"telecom\": [ { \"system\": \"phone\", \"value\": \"9620499189\" } ], \"gender\": \"male\", \"birthDate\": \"1960-09-26\", \"address\": [ { \"text\": \"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\", \"city\": \"Bengaluru\", \"state\": \"Karnataka\", \"postalCode\": \"560056\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"CoverageEligibilityResponse/COVERAGE1\", \"resource\": { \"resourceType\": \"CoverageEligibilityResponse\", \"id\": \"COVERAGE1\", \"meta\": { \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"] }, \"identifier\": [ { \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" } ], \"status\": \"active\", \"subscriber\": { \"reference\": \"CoverageEligibilityResponse/RVH1003\" }, \"subscriberId\": \"ABC12345\", \"beneficiary\": { \"reference\": \"CoverageEligibilityResponse/RVH1003\" }, \"relationship\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" } ] }, \"payor\": [ { \"reference\": \"CoverageEligibilityResponse/GICOFINDIA\" } ] } }, { \"fullUrl\": \"Practitioner/PractitionerViswasKar\", \"resource\": { \"resourceType\": \"CoverageEligibilityResponse\", \"id\": \"PractitionerViswasKar\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"MD\", \"display\": \"Medical License number\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"DOC-123/456\" } ], \"name\": [ { \"text\": \"Dr Viswas kar\" } ] } } ] }' ,'Rejected', '{}', '1705661714568', '1705661715600', '', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '987664543', 'ABCD1234', 'Abhishek', 'medical')");
        String requestBody = getPayerCoverageEligibilityRejectSuccessRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/coverageeligibility/reject").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_claim_approve_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('3730d51b-7371-4d34-8641-a005dadd2286', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'claim', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w','{}','{ \"resourceType\": \"Bundle\", \"id\": \"3730d51b-7371-4d34-8641-a005dadd2286\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponseBundle.html\"] }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"93d2f78b-897b-4581-aee3-5ea9ccf62e45\" }, \"type\": \"collection\", \"timestamp\": \"2024-01-19T10:17:00.421+00:00\", \"entry\": [ { \"fullUrl\": \"ClaimResponse/fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"resource\": { \"resourceType\": \"ClaimResponse\", \"id\": \"fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponse.html\"] }, \"identifier\": [ { \"system\": \"http://identifiersystem.com\", \"value\": \"b6bbfee4-075e-4c48-bbd8-7e09fa1bb54a\" } ], \"status\": \"active\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"institutional\" } ] }, \"use\": \"claim\", \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"created\": \"2024-01-19T10:17:02+00:00\", \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"requestor\": { \"reference\": \"Organization/WeMeanWell01\" }, \"request\": { \"reference\": \"Claim/CLAIM1\" }, \"outcome\": \"complete\", \"total\": [ { \"category\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\", \"code\": \"benefit\" } ] }, \"amount\": { \"value\": 80000, \"currency\": \"INR\" } } ] } }, { \"fullUrl\": \"Organization/WeMeanWell01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"WeMeanWell01\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"Narayana\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" } ], \"name\": \"BSP Role Mock User\", \"address\": [ { \"text\": \" Bannerghatta Road, Bengaluru \", \"city\": \"Bengaluru\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"GOVOFINDIA\" } ] }, \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"GICOFINDIA\" } ], \"name\": \"Demo Payor\" } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" } ] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" } ], \"name\": [ { \"text\": \"Abhishek\" } ], \"telecom\": [ { \"system\": \"phone\", \"value\": \"9620499129\" } ], \"gender\": \"male\", \"birthDate\": \"1960-09-26\", \"address\": [ { \"text\": \"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\", \"city\": \"Bengaluru\", \"state\": \"Karnataka\", \"postalCode\": \"560056\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Coverage/COVERAGE1\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"COVERAGE1\", \"meta\": { \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"] }, \"identifier\": [ { \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" } ], \"status\": \"active\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"ABCD1234\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" } ] }, \"payor\": [ { \"reference\": \"Organization/GICOFINDIA\" } ] } }, { \"fullUrl\": \"Practitioner/PractitionerViswasKar\", \"resource\": { \"resourceType\": \"Practitioner\", \"id\": \"PractitionerViswasKar\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"MD\", \"display\": \"Medical License number\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"DOC-123/456\" } ], \"name\": [ { \"text\": \"Dr Viswas kar\" } ] } } ] }', 'Approved', '{\"medical\": {\"status\": \"Approved\", \"remarks\": \"\"}, \"financial\": {\"status\": \"Approved\"}}', '1705661714568', '1705661715600', 'response.complete', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Approved', 'e-ce224fd0b737', '1234', '1234', 'Approved', 'ABSP', '{}', '987664543', 'ABCD1234', 'Abhishek', 'medical')");
        String requestBody = getClaimApproveSuccess();
        MvcResult mvcResult = mockMvc.perform(post("/payer/claim/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_preauth_approve_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('3730d51b-7371-4d34-8641-a005dadd2286', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'preauth', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w','{}','{ \"resourceType\": \"Bundle\", \"id\": \"3730d51b-7371-4d34-8641-a005dadd2286\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponseBundle.html\"] }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"93d2f78b-897b-4581-aee3-5ea9ccf62e45\" }, \"type\": \"collection\", \"timestamp\": \"2024-01-19T10:17:00.421+00:00\", \"entry\": [ { \"fullUrl\": \"ClaimResponse/fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"resource\": { \"resourceType\": \"ClaimResponse\", \"id\": \"fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponse.html\"] }, \"identifier\": [ { \"system\": \"http://identifiersystem.com\", \"value\": \"b6bbfee4-075e-4c48-bbd8-7e09fa1bb54a\" } ], \"status\": \"active\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"institutional\" } ] }, \"use\": \"claim\", \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"created\": \"2024-01-19T10:17:02+00:00\", \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"requestor\": { \"reference\": \"Organization/WeMeanWell01\" }, \"request\": { \"reference\": \"Claim/CLAIM1\" }, \"outcome\": \"complete\", \"total\": [ { \"category\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\", \"code\": \"benefit\" } ] }, \"amount\": { \"value\": 80000, \"currency\": \"INR\" } } ] } }, { \"fullUrl\": \"Organization/WeMeanWell01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"WeMeanWell01\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"Narayana\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" } ], \"name\": \"BSP Role Mock User\", \"address\": [ { \"text\": \" Bannerghatta Road, Bengaluru \", \"city\": \"Bengaluru\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"GOVOFINDIA\" } ] }, \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"GICOFINDIA\" } ], \"name\": \"Demo Payor\" } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" } ] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" } ], \"name\": [ { \"text\": \"Abhishek\" } ], \"telecom\": [ { \"system\": \"phone\", \"value\": \"9620499129\" } ], \"gender\": \"male\", \"birthDate\": \"1960-09-26\", \"address\": [ { \"text\": \"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\", \"city\": \"Bengaluru\", \"state\": \"Karnataka\", \"postalCode\": \"560056\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Coverage/COVERAGE1\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"COVERAGE1\", \"meta\": { \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"] }, \"identifier\": [ { \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" } ], \"status\": \"active\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"ABCD1234\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" } ] }, \"payor\": [ { \"reference\": \"Organization/GICOFINDIA\" } ] } }, { \"fullUrl\": \"Practitioner/PractitionerViswasKar\", \"resource\": { \"resourceType\": \"Practitioner\", \"id\": \"PractitionerViswasKar\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"MD\", \"display\": \"Medical License number\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"DOC-123/456\" } ], \"name\": [ { \"text\": \"Dr Viswas kar\" } ] } } ] }', 'Approved', '{\"medical\": {\"status\": \"Approved\", \"remarks\": \"\"}, \"financial\": {\"status\": \"Approved\"}}', '1705661714568', '1705661715600', 'response.complete', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Approved', 'e-ce224fd0b737', '1234', '1234', 'Approved', 'ABSP', '{}', '987664543', 'ABCD1234', 'Abhishek', 'medical')");
        String requestBody = getPreauthApproveSuccess();
        MvcResult mvcResult = mockMvc.perform(post("/payer/preauth/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_preauth_pending_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('3730d51b-7371-4d34-8641-a005dadd2286', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'preauth', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w','{}','{ \"resourceType\": \"Bundle\", \"id\": \"3730d51b-7371-4d34-8641-a005dadd2286\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponseBundle.html\"] }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"93d2f78b-897b-4581-aee3-5ea9ccf62e45\" }, \"type\": \"collection\", \"timestamp\": \"2024-01-19T10:17:00.421+00:00\", \"entry\": [ { \"fullUrl\": \"ClaimResponse/fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"resource\": { \"resourceType\": \"ClaimResponse\", \"id\": \"fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponse.html\"] }, \"identifier\": [ { \"system\": \"http://identifiersystem.com\", \"value\": \"b6bbfee4-075e-4c48-bbd8-7e09fa1bb54a\" } ], \"status\": \"Pending\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"institutional\" } ] }, \"use\": \"claim\", \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"created\": \"2024-01-19T10:17:02+00:00\", \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"requestor\": { \"reference\": \"Organization/WeMeanWell01\" }, \"request\": { \"reference\": \"Claim/CLAIM1\" }, \"outcome\": \"complete\", \"total\": [ { \"category\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\", \"code\": \"benefit\" } ] }, \"amount\": { \"value\": 80000, \"currency\": \"INR\" } } ] } }, { \"fullUrl\": \"Organization/WeMeanWell01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"WeMeanWell01\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"Narayana\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" } ], \"name\": \"BSP Role Mock User\", \"address\": [ { \"text\": \" Bannerghatta Road, Bengaluru \", \"city\": \"Bengaluru\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"GOVOFINDIA\" } ] }, \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"GICOFINDIA\" } ], \"name\": \"Demo Payor\" } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" } ] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" } ], \"name\": [ { \"text\": \"Abhishek\" } ], \"telecom\": [ { \"system\": \"phone\", \"value\": \"9620499129\" } ], \"gender\": \"male\", \"birthDate\": \"1960-09-26\", \"address\": [ { \"text\": \"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\", \"city\": \"Bengaluru\", \"state\": \"Karnataka\", \"postalCode\": \"560056\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Coverage/COVERAGE1\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"COVERAGE1\", \"meta\": { \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"] }, \"identifier\": [ { \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" } ], \"status\": \"pending\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"ABCD1234\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" } ] }, \"payor\": [ { \"reference\": \"Organization/GICOFINDIA\" } ] } }, { \"fullUrl\": \"Practitioner/PractitionerViswasKar\", \"resource\": { \"resourceType\": \"Practitioner\", \"id\": \"PractitionerViswasKar\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"MD\", \"display\": \"Medical License number\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"DOC-123/456\" } ], \"name\": [ { \"text\": \"Dr Viswas kar\" } ] } } ] }', 'Pending', '{\"medical\": {\"status\": \"Pending\", \"remarks\": \"\"}, \"financial\": {\"status\": \"Pending\"}}', '1705661714568', '1705661715600', '', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '987664543', 'ABCD1234', 'Abhishek', 'medical')");
        String requestBody = getPreauthApproveSuccess();
        MvcResult mvcResult = mockMvc.perform(post("/payer/preauth/approve").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_preauth_reject_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('9537fcef-7ce5-444d-8b7e-87dde997b8f2', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'preauth', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w','{}','{ \"resourceType\": \"Bundle\", \"id\": \"3730d51b-7371-4d34-8641-a005dadd2286\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponseBundle.html\"] }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"93d2f78b-897b-4581-aee3-5ea9ccf62e45\" }, \"type\": \"collection\", \"timestamp\": \"2024-01-19T10:17:00.421+00:00\", \"entry\": [ { \"fullUrl\": \"ClaimResponse/fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"resource\": { \"resourceType\": \"ClaimResponse\", \"id\": \"fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponse.html\"] }, \"identifier\": [ { \"system\": \"http://identifiersystem.com\", \"value\": \"b6bbfee4-075e-4c48-bbd8-7e09fa1bb54a\" } ], \"status\": \"active\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"institutional\" } ] }, \"use\": \"claim\", \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"created\": \"2024-01-19T10:17:02+00:00\", \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"requestor\": { \"reference\": \"Organization/WeMeanWell01\" }, \"request\": { \"reference\": \"Claim/CLAIM1\" }, \"outcome\": \"complete\", \"total\": [ { \"category\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\", \"code\": \"benefit\" } ] }, \"amount\": { \"value\": 80000, \"currency\": \"INR\" } } ] } }, { \"fullUrl\": \"Organization/WeMeanWell01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"WeMeanWell01\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"Narayana\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" } ], \"name\": \"BSP Role Mock User\", \"address\": [ { \"text\": \" Bannerghatta Road, Bengaluru \", \"city\": \"Bengaluru\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"GOVOFINDIA\" } ] }, \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"GICOFINDIA\" } ], \"name\": \"Demo Payor\" } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" } ] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" } ], \"name\": [ { \"text\": \"Abhishek\" } ], \"telecom\": [ { \"system\": \"phone\", \"value\": \"9620499129\" } ], \"gender\": \"male\", \"birthDate\": \"1960-09-26\", \"address\": [ { \"text\": \"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\", \"city\": \"Bengaluru\", \"state\": \"Karnataka\", \"postalCode\": \"560056\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Coverage/COVERAGE1\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"COVERAGE1\", \"meta\": { \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"] }, \"identifier\": [ { \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" } ], \"status\": \"active\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"ABCD1234\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" } ] }, \"payor\": [ { \"reference\": \"Organization/GICOFINDIA\" } ] } }, { \"fullUrl\": \"Practitioner/PractitionerViswasKar\", \"resource\": { \"resourceType\": \"Practitioner\", \"id\": \"PractitionerViswasKar\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"MD\", \"display\": \"Medical License number\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"DOC-123/456\" } ], \"name\": [ { \"text\": \"Dr Viswas kar\" } ] } } ] }', 'Rejected', '{\"medical\": {\"status\": \"Rejected\", \"remarks\": \"\"}, \"financial\": {\"status\": \"Rejected\"}}', '1705661714568', '1705661715600', '', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Rejected', 'e-ce224fd0b737', '1234', '1234', 'Rejected', 'ABSP', '{}', '987664543', 'ABCD1234', 'Abhishek', 'medical')");
        String requestBody = getPreauthRejectSuccessRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/preauth/reject").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }

    @Test
    public void payer_preauth_status_update_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('9537fcef-7ce5-444d-8b7e-87dde997b8f2', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'preauth', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w','{}','{ \"resourceType\": \"Bundle\", \"id\": \"3730d51b-7371-4d34-8641-a005dadd2286\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponseBundle.html\"] }, \"identifier\": { \"system\": \"https://www.tmh.in/bundle\", \"value\": \"93d2f78b-897b-4581-aee3-5ea9ccf62e45\" }, \"type\": \"collection\", \"timestamp\": \"2024-01-19T10:17:00.421+00:00\", \"entry\": [ { \"fullUrl\": \"ClaimResponse/fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"resource\": { \"resourceType\": \"ClaimResponse\", \"id\": \"fe4216f5-6c38-4b8a-9664-8e090d9576e2\", \"meta\": { \"lastUpdated\": \"2024-01-19T10:17:02.570+00:00\", \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-ClaimResponse.html\"] }, \"identifier\": [ { \"system\": \"http://identifiersystem.com\", \"value\": \"b6bbfee4-075e-4c48-bbd8-7e09fa1bb54a\" } ], \"status\": \"active\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"institutional\" } ] }, \"use\": \"claim\", \"patient\": { \"reference\": \"Patient/RVH1003\" }, \"created\": \"2024-01-19T10:17:02+00:00\", \"insurer\": { \"reference\": \"Organization/GICOFINDIA\" }, \"requestor\": { \"reference\": \"Organization/WeMeanWell01\" }, \"request\": { \"reference\": \"Claim/CLAIM1\" }, \"outcome\": \"complete\", \"total\": [ { \"category\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\", \"code\": \"benefit\" } ] }, \"amount\": { \"value\": 80000, \"currency\": \"INR\" } } ] } }, { \"fullUrl\": \"Organization/WeMeanWell01\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"WeMeanWell01\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"Narayana\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"HFR-ID-FOR-TMH\" } ], \"name\": \"BSP Role Mock User\", \"address\": [ { \"text\": \" Bannerghatta Road, Bengaluru \", \"city\": \"Bengaluru\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Organization/GICOFINDIA\", \"resource\": { \"resourceType\": \"Organization\", \"id\": \"GICOFINDIA\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"AC\", \"display\": \"GOVOFINDIA\" } ] }, \"system\": \"http://irdai.gov.in/insurers\", \"value\": \"GICOFINDIA\" } ], \"name\": \"Demo Payor\" } }, { \"fullUrl\": \"Patient/RVH1003\", \"resource\": { \"resourceType\": \"Patient\", \"id\": \"RVH1003\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"SN\", \"display\": \"Subscriber Number\" } ] }, \"system\": \"http://gicofIndia.com/beneficiaries\", \"value\": \"BEN-101\" } ], \"name\": [ { \"text\": \"Abhishek\" } ], \"telecom\": [ { \"system\": \"phone\", \"value\": \"9620499129\" } ], \"gender\": \"male\", \"birthDate\": \"1960-09-26\", \"address\": [ { \"text\": \"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\", \"city\": \"Bengaluru\", \"state\": \"Karnataka\", \"postalCode\": \"560056\", \"country\": \"India\" } ] } }, { \"fullUrl\": \"Coverage/COVERAGE1\", \"resource\": { \"resourceType\": \"Coverage\", \"id\": \"COVERAGE1\", \"meta\": { \"profile\": [\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"] }, \"identifier\": [ { \"system\": \"https://www.gicofIndia.in/policies\", \"value\": \"policy-RVH1003\" } ], \"status\": \"active\", \"subscriber\": { \"reference\": \"Patient/RVH1003\" }, \"subscriberId\": \"ABCD1234\", \"beneficiary\": { \"reference\": \"Patient/RVH1003\" }, \"relationship\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/subscriber-relationship\", \"code\": \"self\" } ] }, \"payor\": [ { \"reference\": \"Organization/GICOFINDIA\" } ] } }, { \"fullUrl\": \"Practitioner/PractitionerViswasKar\", \"resource\": { \"resourceType\": \"Practitioner\", \"id\": \"PractitionerViswasKar\", \"meta\": { \"profile\": [\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"] }, \"identifier\": [ { \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\", \"code\": \"MD\", \"display\": \"Medical License number\" } ] }, \"system\": \"http://abdm.gov.in/facilities\", \"value\": \"DOC-123/456\" } ], \"name\": [ { \"text\": \"Dr Viswas kar\" } ] } } ] }', 'Pending', '{\"medical\": {\"status\": \"Pending\", \"remarks\": \"\"}, \"financial\": {\"status\": \"Pending\"}}', '1705661714568', '1705661715600', '', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '987664543', 'ABCD1234', 'Abhishek', 'medical')");
        String requestBody = getPreauthRejectSuccessRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/payer/preauth/reject").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(200, status);
    }
}
