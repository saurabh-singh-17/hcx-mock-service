package org.swasth.hcx.controllers.v1;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.http.MediaType;
import org.springframework.mock.web.MockHttpServletResponse;
import org.springframework.test.web.servlet.MvcResult;
import org.swasth.hcx.controllers.BaseSpec;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;

public class CoverageEligibilityTests extends BaseSpec {

    @Value("${hcx_application.api_version}")
    private String api_version;

    @Test
    public void check_coverageeligibility_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS mock_participant");
        postgresService.execute("CREATE TABLE mock_participant (\n" +
                "    parent_participant_code character varying,\n" +
                "    child_participant_code character varying PRIMARY KEY NOT NULL,\n" +
                "    primary_email character varying,\n" +
                "    password character varying,\n" +
                "    private_key character varying\n" +
                ");");
        postgresService.execute("INSERT INTO mock_participant(parent_participant_code,child_participant_code,primary_email,password,private_key)"+"VALUES ('hosp_hcx_955522@swasth-hcx-dev ','payr_hcxmoc_903588@swasth-hcx-dev','lagertha+mock_payor@yopmail.com','Opensaber@123','-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDAQLG7dTHuSE1F 8L46wS84SCU4Pf+ofSB8/h8tlyUHCw2SmY3CRZ3Uz1Jtw87UCdEvaSqs4YvkdKIh 1Nt04xpunUufUYNx6wBx/S/nuG7zcUu+bQeO1SpeEAA6+4HvnAyVBc+YCctnyREr Pgigs8MJG6dMA2rEap1na8VTrVN6JNNhcJxqnCyMoZ/aJIrmRxMj0Eh55LC20AZh jkxt5q/12qarpc/0ItQ2nv11fucojVVQyQGBaeqULVM9fGXbtquLXnRLJWzTLuSN Zk3Z+NpZZ5W7gxyBsxGTc7ccWp5edOxMXK3wELxsqirT0EOIz2ZMEYVbWrCyxfGC WYGUGRkPAgMBAAECggEACRAjsMweDfcfmW/3b8qioLsZ8hROJJG9gdby/lG1P6dA PQx7F9DzV1BsuNr1uZ4628rP5bV+REdRS1n+/HwmR1en9HtBwJGNBFKkuv5BUL2j DfeS1yNqa2PCtwUbQ4HuP+o1tpujmKFsa0bx3i2LQLcqhFVW56qFABafB0pQ+J2F 5MIgoS3e84Q/4oHYhxcRCgINQRoWKkqLGdAMg83NGe/G97PHGW9PPG9AQnfVhqey adov6rO/VOhbEYoKIwBq4G2qFnq6GwxDsx+wKl7SMVIwJzk8lRd5IaCGNscGEirU f/1PKxRT5WR735wyFyqLtSATFlrvH+sIiKsYR0PRlQKBgQDewV/umGidbm4jcmYR PFW53Ipr05lz4VNUOxdI/NIQ5jNfwjTE7Ep4R2xWycgzFwtoYYzWOhgHfSEcQ7KH 4z7w5Oe5CO+NB9viTxsrRx/kc6KU5cr3iqYCQzu2IaaVL2n6a0dDWR1ZXSGckKCf RWENuPkU9BAMn5LqEbcxVkSp6wKBgQDc8e4tMef6jpX5i8UEtd3y0HE302I1opfM 7Sdl5KVYsTOcTVobYM3niRKGtaY26EP7JCI2D0rCGS/DpDmsf7v5uHD4pZ4whRGR uhj64NIzveG3goki/ZerFZTc83mBxcaSBg48XL2x4oy32d0YXRC5IqEZ5vAIo7JE PlOZgKZAbQKBgQCVlVN/XHc76NErGoIx5stGYTPOzqxIZbJYaMntKGFEGeG71yUq a+ZiOMwmx5+Zt0rg0EkL/rzuInfejBNSLyawC3cUCU0b7oAYy7hZ6owfFAvEYz9V 1ZQ/BrkNSDGeEtXe5LVZI3mS7fhJM9G4wpU26tTQ3kf8whec+UKEbgLz+wKBgH1H EG2/5nFDd/ZPMh9Bn9+WIRwuV3liAADKV5SG2No5X7I4iecMNLQcHM0VInHvsNwt 2NgeQ51a+qJL9AfDRaqK0kOqZM/OI/AlPRTDdWyxNdL/yRJ2CBGR4x6FT1gt9DHI DTpcu5KpinCUr7Co1FqlMAOn1mKPrvzS+kQHljzhAoGBAL2Ui1c/qrX9ezggR78D WTK8u4QkvSdOoSDVbOes1FYEExHWh8hvRfO4PLTzlK58MJJnWj9hgiMItWzI7Iic pOEsHqgNl19VjdtKEloRAe5HYuC0pTTNTXo7qhq/De1wPr/lM82jofNXzpSpDetU 43Q9DXQ5KNiBbsKedfkRhJdY\n-----END PRIVATE KEY-----')");
        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
        postgresService.execute("CREATE TABLE payersystem_data (\n" +
                "    request_id character varying not null PRIMARY KEY,\n" +
                "    sender_code character varying,\n" +
                "    recipient_code character varying,\n" +
                "    action character varying,\n" +
                "    raw_payload character varying,\n" +
                "    request_fhir character varying,\n" +
                "    response_fhir character varying,\n" +
                "    status character varying,\n" +
                "    additional_info jsonb,\n" +
                "    created_on bigint,\n" +
                "    updated_on bigint,\n" +
                "    on_action_status character varying,\n" +
                "    correlation_id character varying,\n" +
                "    mobile character varying,\n" +
                "    otp_verification character varying,\n" +
                "    workflow_id character varying,\n" +
                "    account_number character varying,\n" +
                "    ifsc_code character varying,\n" +
                "    bank_details character varying,\n" +
                "    app character varying,\n" +
                "    supporting_documents jsonb,\n" +
                "    bill_amount character varying,\n" +
                "    insurance_id character varying,\n" +
                "    patient_name character varying,\n" +
                "    service_type character varying\n" +
                ");\n");
        postgresService.execute("INSERT INTO payersystem_data" +
                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
                "VALUES" + "('83dbf67f-4e71-4bdb-b50b-36caba8f3ee1', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'coverageeligibility', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '32329', 'ABCD1234.', 'Abhishek.', 'medical')");
        String requestBody = getCoverageEligibilityRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/"+ api_version + "/coverageeligibility/check").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(202, status);
    }

    @Test
    public void coverage_eligibility_error_while_processing_incoming_request() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS mock_participant");
        postgresService.execute("CREATE TABLE mock_participant (\n" +
                "    parent_participant_code character varying,\n" +
                "    child_participant_code character varying PRIMARY KEY,\n" +
                "    primary_email character varying,\n" +
                "    password character varying,\n" +
                "    private_key character varying\n" +
                ");");
        postgresService.execute("INSERT INTO mock_participant(parent_participant_code,child_participant_code,primary_email,password,private_key)" + "VALUES ('hosp_hcx_955522@swasth-hcx-dev ','payr_hcxmoc_903588@swasth-hcx-dev','lagertha+mock_payor@yopmail.com','Opensaber@123','-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDAQLG7dTHuSE1F 8L46wS84SCU4Pf+ofSB8/h8tlyUHCw2SmY3CRZ3Uz1Jtw87UCdEvaSqs4YvkdKIh 1Nt04xpunUufUYNx6wBx/S/nuG7zcUu+bQeO1SpeEAA6+4HvnAyVBc+YCctnyREr Pgigs8MJG6dMA2rEap1na8VTrVN6JNNhcJxqnCyMoZ/aJIrmRxMj0Eh55LC20AZh jkxt5q/12qarpc/0ItQ2nv11fucojVVQyQGBaeqULVM9fGXbtquLXnRLJWzTLuSN Zk3Z+NpZZ5W7gxyBsxGTc7ccWp5edOxMXK3wELxsqirT0EOIz2ZMEYVbWrCyxfGC WYGUGRkPAgMBAAECggEACRAjsMweDfcfmW/3b8qioLsZ8hROJJG9gdby/lG1P6dA PQx7F9DzV1BsuNr1uZ4628rP5bV+REdRS1n+/HwmR1en9HtBwJGNBFKkuv5BUL2j DfeS1yNqa2PCtwUbQ4HuP+o1tpujmKFsa0bx3i2LQLcqhFVW56qFABafB0pQ+J2F 5MIgoS3e84Q/4oHYhxcRCgINQRoWKkqLGdAMg83NGe/G97PHGW9PPG9AQnfVhqey adov6rO/VOhbEYoKIwBq4G2qFnq6GwxDsx+wKl7SMVIwJzk8lRd5IaCGNscGEirU f/1PKxRT5WR735wyFyqLtSATFlrvH+sIiKsYR0PRlQKBgQDewV/umGidbm4jcmYR PFW53Ipr05lz4VNUOxdI/NIQ5jNfwjTE7Ep4R2xWycgzFwtoYYzWOhgHfSEcQ7KH 4z7w5Oe5CO+NB9viTxsrRx/kc6KU5cr3iqYCQzu2IaaVL2n6a0dDWR1ZXSGckKCf RWENuPkU9BAMn5LqEbcxVkSp6wKBgQDc8e4tMef6jpX5i8UEtd3y0HE302I1opfM 7Sdl5KVYsTOcTVobYM3niRKGtaY26EP7JCI2D0rCGS/DpDmsf7v5uHD4pZ4whRGR uhj64NIzveG3goki/ZerFZTc83mBxcaSBg48XL2x4oy32d0YXRC5IqEZ5vAIo7JE PlOZgKZAbQKBgQCVlVN/XHc76NErGoIx5stGYTPOzqxIZbJYaMntKGFEGeG71yUq a+ZiOMwmx5+Zt0rg0EkL/rzuInfejBNSLyawC3cUCU0b7oAYy7hZ6owfFAvEYz9V 1ZQ/BrkNSDGeEtXe5LVZI3mS7fhJM9G4wpU26tTQ3kf8whec+UKEbgLz+wKBgH1H EG2/5nFDd/ZPMh9Bn9+WIRwuV3liAADKV5SG2No5X7I4iecMNLQcHM0VInHvsNwt 2NgeQ51a+qJL9AfDRaqK0kOqZM/OI/AlPRTDdWyxNdL/yRJ2CBGR4x6FT1gt9DHI DTpcu5KpinCUr7Co1FqlMAOn1mKPrvzS+kQHljzhAoGBAL2Ui1c/qrX9ezggR78D WTK8u4QkvSdOoSDVbOes1FYEExHWh8hvRfO4PLTzlK58MJJnWj9hgiMItWzI7Iic pOEsHqgNl19VjdtKEloRAe5HYuC0pTTNTXo7qhq/De1wPr/lM82jofNXzpSpDetU 43Q9DXQ5KNiBbsKedfkRhJdY\n-----END PRIVATE KEY-----')");
        String requestBody = getCoverageEligibilityErrorWhileProcessingRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/" + api_version + "/coverageeligibility/check").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(500, status);
    }

    @Test
    public void on_check_coverage_eligibility_success_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS mock_participant");
        postgresService.execute("CREATE TABLE mock_participant (\n" +
                "    parent_participant_code character varying,\n" +
                "    child_participant_code character varying PRIMARY KEY,\n" +
                "    primary_email character varying,\n" +
                "    password character varying,\n" +
                "    private_key character varying\n" +
                ");");
        postgresService.execute("INSERT INTO mock_participant(parent_participant_code,child_participant_code,primary_email,password,private_key)"+"VALUES ('hosp_hcx_955522@swasth-hcx-dev ','payr_hcxmoc_903588@swasth-hcx-dev','lagertha+mock_payor@yopmail.com','Opensaber@123','-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDAQLG7dTHuSE1F 8L46wS84SCU4Pf+ofSB8/h8tlyUHCw2SmY3CRZ3Uz1Jtw87UCdEvaSqs4YvkdKIh 1Nt04xpunUufUYNx6wBx/S/nuG7zcUu+bQeO1SpeEAA6+4HvnAyVBc+YCctnyREr Pgigs8MJG6dMA2rEap1na8VTrVN6JNNhcJxqnCyMoZ/aJIrmRxMj0Eh55LC20AZh jkxt5q/12qarpc/0ItQ2nv11fucojVVQyQGBaeqULVM9fGXbtquLXnRLJWzTLuSN Zk3Z+NpZZ5W7gxyBsxGTc7ccWp5edOxMXK3wELxsqirT0EOIz2ZMEYVbWrCyxfGC WYGUGRkPAgMBAAECggEACRAjsMweDfcfmW/3b8qioLsZ8hROJJG9gdby/lG1P6dA PQx7F9DzV1BsuNr1uZ4628rP5bV+REdRS1n+/HwmR1en9HtBwJGNBFKkuv5BUL2j DfeS1yNqa2PCtwUbQ4HuP+o1tpujmKFsa0bx3i2LQLcqhFVW56qFABafB0pQ+J2F 5MIgoS3e84Q/4oHYhxcRCgINQRoWKkqLGdAMg83NGe/G97PHGW9PPG9AQnfVhqey adov6rO/VOhbEYoKIwBq4G2qFnq6GwxDsx+wKl7SMVIwJzk8lRd5IaCGNscGEirU f/1PKxRT5WR735wyFyqLtSATFlrvH+sIiKsYR0PRlQKBgQDewV/umGidbm4jcmYR PFW53Ipr05lz4VNUOxdI/NIQ5jNfwjTE7Ep4R2xWycgzFwtoYYzWOhgHfSEcQ7KH 4z7w5Oe5CO+NB9viTxsrRx/kc6KU5cr3iqYCQzu2IaaVL2n6a0dDWR1ZXSGckKCf RWENuPkU9BAMn5LqEbcxVkSp6wKBgQDc8e4tMef6jpX5i8UEtd3y0HE302I1opfM 7Sdl5KVYsTOcTVobYM3niRKGtaY26EP7JCI2D0rCGS/DpDmsf7v5uHD4pZ4whRGR uhj64NIzveG3goki/ZerFZTc83mBxcaSBg48XL2x4oy32d0YXRC5IqEZ5vAIo7JE PlOZgKZAbQKBgQCVlVN/XHc76NErGoIx5stGYTPOzqxIZbJYaMntKGFEGeG71yUq a+ZiOMwmx5+Zt0rg0EkL/rzuInfejBNSLyawC3cUCU0b7oAYy7hZ6owfFAvEYz9V 1ZQ/BrkNSDGeEtXe5LVZI3mS7fhJM9G4wpU26tTQ3kf8whec+UKEbgLz+wKBgH1H EG2/5nFDd/ZPMh9Bn9+WIRwuV3liAADKV5SG2No5X7I4iecMNLQcHM0VInHvsNwt 2NgeQ51a+qJL9AfDRaqK0kOqZM/OI/AlPRTDdWyxNdL/yRJ2CBGR4x6FT1gt9DHI DTpcu5KpinCUr7Co1FqlMAOn1mKPrvzS+kQHljzhAoGBAL2Ui1c/qrX9ezggR78D WTK8u4QkvSdOoSDVbOes1FYEExHWh8hvRfO4PLTzlK58MJJnWj9hgiMItWzI7Iic pOEsHqgNl19VjdtKEloRAe5HYuC0pTTNTXo7qhq/De1wPr/lM82jofNXzpSpDetU 43Q9DXQ5KNiBbsKedfkRhJdY\n-----END PRIVATE KEY-----')");
        String requestBody = getCoverageEligibilityOnCheckRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/"+ api_version + "/coverageeligibility/on_check").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        int status = response.getStatus();
        assertEquals(202, status);
    }

    @Test
    public void on_check_coverage_eligibility_exception_scenario() throws Exception {
        postgresService.execute("DROP TABLE IF EXISTS mock_participant");
        postgresService.execute("CREATE TABLE mock_participant (\n" +
                "    parent_participant_code character varying,\n" +
                "    child_participant_code character varying PRIMARY KEY,\n" +
                "    primary_email character varying,\n" +
                "    password character varying,\n" +
                "    private_key character varying\n" +
                ");");
        postgresService.execute("INSERT INTO mock_participant(parent_participant_code,child_participant_code,primary_email,password,private_key)"+"VALUES ('hosp_hcx_955522@swasth-hcx-dev ','payr_hcxmoc_903588@swasth-hcx-dev','lagertha+mock_payor@yopmail.com','Opensaber@123','-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDAQLG7dTHuSE1F 8L46wS84SCU4Pf+ofSB8/h8tlyUHCw2SmY3CRZ3Uz1Jtw87UCdEvaSqs4YvkdKIh 1Nt04xpunUufUYNx6wBx/S/nuG7zcUu+bQeO1SpeEAA6+4HvnAyVBc+YCctnyREr Pgigs8MJG6dMA2rEap1na8VTrVN6JNNhcJxqnCyMoZ/aJIrmRxMj0Eh55LC20AZh jkxt5q/12qarpc/0ItQ2nv11fucojVVQyQGBaeqULVM9fGXbtquLXnRLJWzTLuSN Zk3Z+NpZZ5W7gxyBsxGTc7ccWp5edOxMXK3wELxsqirT0EOIz2ZMEYVbWrCyxfGC WYGUGRkPAgMBAAECggEACRAjsMweDfcfmW/3b8qioLsZ8hROJJG9gdby/lG1P6dA PQx7F9DzV1BsuNr1uZ4628rP5bV+REdRS1n+/HwmR1en9HtBwJGNBFKkuv5BUL2j DfeS1yNqa2PCtwUbQ4HuP+o1tpujmKFsa0bx3i2LQLcqhFVW56qFABafB0pQ+J2F 5MIgoS3e84Q/4oHYhxcRCgINQRoWKkqLGdAMg83NGe/G97PHGW9PPG9AQnfVhqey adov6rO/VOhbEYoKIwBq4G2qFnq6GwxDsx+wKl7SMVIwJzk8lRd5IaCGNscGEirU f/1PKxRT5WR735wyFyqLtSATFlrvH+sIiKsYR0PRlQKBgQDewV/umGidbm4jcmYR PFW53Ipr05lz4VNUOxdI/NIQ5jNfwjTE7Ep4R2xWycgzFwtoYYzWOhgHfSEcQ7KH 4z7w5Oe5CO+NB9viTxsrRx/kc6KU5cr3iqYCQzu2IaaVL2n6a0dDWR1ZXSGckKCf RWENuPkU9BAMn5LqEbcxVkSp6wKBgQDc8e4tMef6jpX5i8UEtd3y0HE302I1opfM 7Sdl5KVYsTOcTVobYM3niRKGtaY26EP7JCI2D0rCGS/DpDmsf7v5uHD4pZ4whRGR uhj64NIzveG3goki/ZerFZTc83mBxcaSBg48XL2x4oy32d0YXRC5IqEZ5vAIo7JE PlOZgKZAbQKBgQCVlVN/XHc76NErGoIx5stGYTPOzqxIZbJYaMntKGFEGeG71yUq a+ZiOMwmx5+Zt0rg0EkL/rzuInfejBNSLyawC3cUCU0b7oAYy7hZ6owfFAvEYz9V 1ZQ/BrkNSDGeEtXe5LVZI3mS7fhJM9G4wpU26tTQ3kf8whec+UKEbgLz+wKBgH1H EG2/5nFDd/ZPMh9Bn9+WIRwuV3liAADKV5SG2No5X7I4iecMNLQcHM0VInHvsNwt 2NgeQ51a+qJL9AfDRaqK0kOqZM/OI/AlPRTDdWyxNdL/yRJ2CBGR4x6FT1gt9DHI DTpcu5KpinCUr7Co1FqlMAOn1mKPrvzS+kQHljzhAoGBAL2Ui1c/qrX9ezggR78D WTK8u4QkvSdOoSDVbOes1FYEExHWh8hvRfO4PLTzlK58MJJnWj9hgiMItWzI7Iic pOEsHqgNl19VjdtKEloRAe5HYuC0pTTNTXo7qhq/De1wPr/lM82jofNXzpSpDetU 43Q9DXQ5KNiBbsKedfkRhJdY\n-----END PRIVATE KEY-----')");
        String requestBody = getCoverageEligibilityRequestBody();
        MvcResult mvcResult = mockMvc.perform(post("/"+ api_version + "/coverageeligibility/on_check").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
        MockHttpServletResponse response = mvcResult.getResponse();
        System.out.println("response ce " + mvcResult.getResponse().getContentAsString());
        int status = response.getStatus();
        assertEquals(500, status);
    }

//    @Test
//    public void db_coverageeligibility_exception_scenario() throws Exception {
//        postgresService.execute("DROP TABLE IF EXISTS mock_participant");
//        postgresService.execute("CREATE TABLE mock_participant (\n" +
//                "    parent_participant_code character varying,\n" +
//                "    child_participant_code character varying PRIMARY KEY NOT NULL,\n" +
//                "    primary_email character varying,\n" +
//                "    password character varying,\n" +
//                "    private_key character varying\n" +
//                ");");
//        postgresService.execute("INSERT INTO mock_participant(parent_participant_code,child_participant_code,primary_email,password,private_key)"+"VALUES ('hosp_hcx_955522@swasth-hcx-dev ','payr_hcxmoc_903588@swasth-hcx-dev','lagertha+mock_payor@yopmail.com','Opensaber@123','-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDAQLG7dTHuSE1F 8L46wS84SCU4Pf+ofSB8/h8tlyUHCw2SmY3CRZ3Uz1Jtw87UCdEvaSqs4YvkdKIh 1Nt04xpunUufUYNx6wBx/S/nuG7zcUu+bQeO1SpeEAA6+4HvnAyVBc+YCctnyREr Pgigs8MJG6dMA2rEap1na8VTrVN6JNNhcJxqnCyMoZ/aJIrmRxMj0Eh55LC20AZh jkxt5q/12qarpc/0ItQ2nv11fucojVVQyQGBaeqULVM9fGXbtquLXnRLJWzTLuSN Zk3Z+NpZZ5W7gxyBsxGTc7ccWp5edOxMXK3wELxsqirT0EOIz2ZMEYVbWrCyxfGC WYGUGRkPAgMBAAECggEACRAjsMweDfcfmW/3b8qioLsZ8hROJJG9gdby/lG1P6dA PQx7F9DzV1BsuNr1uZ4628rP5bV+REdRS1n+/HwmR1en9HtBwJGNBFKkuv5BUL2j DfeS1yNqa2PCtwUbQ4HuP+o1tpujmKFsa0bx3i2LQLcqhFVW56qFABafB0pQ+J2F 5MIgoS3e84Q/4oHYhxcRCgINQRoWKkqLGdAMg83NGe/G97PHGW9PPG9AQnfVhqey adov6rO/VOhbEYoKIwBq4G2qFnq6GwxDsx+wKl7SMVIwJzk8lRd5IaCGNscGEirU f/1PKxRT5WR735wyFyqLtSATFlrvH+sIiKsYR0PRlQKBgQDewV/umGidbm4jcmYR PFW53Ipr05lz4VNUOxdI/NIQ5jNfwjTE7Ep4R2xWycgzFwtoYYzWOhgHfSEcQ7KH 4z7w5Oe5CO+NB9viTxsrRx/kc6KU5cr3iqYCQzu2IaaVL2n6a0dDWR1ZXSGckKCf RWENuPkU9BAMn5LqEbcxVkSp6wKBgQDc8e4tMef6jpX5i8UEtd3y0HE302I1opfM 7Sdl5KVYsTOcTVobYM3niRKGtaY26EP7JCI2D0rCGS/DpDmsf7v5uHD4pZ4whRGR uhj64NIzveG3goki/ZerFZTc83mBxcaSBg48XL2x4oy32d0YXRC5IqEZ5vAIo7JE PlOZgKZAbQKBgQCVlVN/XHc76NErGoIx5stGYTPOzqxIZbJYaMntKGFEGeG71yUq a+ZiOMwmx5+Zt0rg0EkL/rzuInfejBNSLyawC3cUCU0b7oAYy7hZ6owfFAvEYz9V 1ZQ/BrkNSDGeEtXe5LVZI3mS7fhJM9G4wpU26tTQ3kf8whec+UKEbgLz+wKBgH1H EG2/5nFDd/ZPMh9Bn9+WIRwuV3liAADKV5SG2No5X7I4iecMNLQcHM0VInHvsNwt 2NgeQ51a+qJL9AfDRaqK0kOqZM/OI/AlPRTDdWyxNdL/yRJ2CBGR4x6FT1gt9DHI DTpcu5KpinCUr7Co1FqlMAOn1mKPrvzS+kQHljzhAoGBAL2Ui1c/qrX9ezggR78D WTK8u4QkvSdOoSDVbOes1FYEExHWh8hvRfO4PLTzlK58MJJnWj9hgiMItWzI7Iic pOEsHqgNl19VjdtKEloRAe5HYuC0pTTNTXo7qhq/De1wPr/lM82jofNXzpSpDetU 43Q9DXQ5KNiBbsKedfkRhJdY\n-----END PRIVATE KEY-----')");
//        postgresService.execute("DROP TABLE IF EXISTS payersystem_data");
//        postgresService.execute("CREATE TABLE payersystem_data (\n" +
//                "    request_id character varying not null PRIMARY KEY,\n" +
//                "    sender_code character varying,\n" +
//                "    recipient_code character varying,\n" +
//                "    action character varying,\n" +
//                "    raw_payload character varying,\n" +
//                "    request_fhir character varying,\n" +
//                "    response_fhir character varying,\n" +
//                "    status character varying,\n" +
//                "    additional_info jsonb,\n" +
//                "    created_on bigint,\n" +
//                "    updated_on bigint,\n" +
//                "    on_action_status character varying,\n" +
//                "    correlation_id character varying,\n" +
//                "    mobile character varying,\n" +
//                "    otp_verification character varying,\n" +
//                "    workflow_id character varying,\n" +
//                "    account_number character varying,\n" +
//                "    ifsc_code character varying,\n" +
//                "    bank_details character varying,\n" +
//                "    app character varying,\n" +
//                "    supporting_documents jsonb,\n" +
//                "    bill_amount character varying,\n" +
//                "    insurance_id character varying,\n" +
//                "    patient_name character varying,\n" +
//                "    service_type character varying\n" +
//                ");\n");
//        postgresService.execute("INSERT INTO payersystem_data" +
//                "(request_id, sender_code, recipient_code, action, raw_payload, request_fhir, response_fhir, status, additional_info, created_on, updated_on, on_action_status, correlation_id, mobile, otp_verification, workflow_id, account_number, ifsc_code, bank_details, app, supporting_documents, bill_amount, insurance_id, patient_name, service_type)" +
//                "VALUES" + "('a16cd71c-159b-4e62-a2e3-6684341b3570', 'bsp_bsprol_846730@swasth-hcx-dev', 'payr_hcxmoc_903588@swasth-hcx-dev', 'coverageeligibility', 'eyJ4LWhjeC1yZWNpcGllbnRfY29kZSI6InBheXJfaGN4bW9jXzkwMzU4OEBzd2FzdGgtaGN4LWRldiIsIngtaGN4LXRpbWVzdGFtcCI6IjIwMjQtMDEtMTlUMTA6NTU6MTMrMDAwMCIsIngtaGN4LXNlbmRlcl9jb2RlIjoiYnNwX2JzcHJvbF84NDY3MzBAc3dhc3RoLWhjeC1kZXYiLCJ4LWhjeC1jb3JyZWxhdGlvbl9pZCI6ImMzZTczMjUxLWRmZmItNDQ2ZS1hMDI4LWUwNzQ4YmQxYWJkZCIsImVuYyI6IkEyNTZHQ00iLCJ4LWhjeC13b3JrZmxvd19pZCI6ImQyYzE4OTNiLWZmOTEtNDFlMi04NTBlLWNlMjI0ZmQwYjczNyIsImFsZyI6IlJTQS1PQUVQLTI1NiIsIngtaGN4LWFwaV9jYWxsX2lkIjoiYTE2Y2Q3MWMtMTU5Yi00ZTYyLWEyZTMtNjY4NDM0MWIzNTcwIn0.a1amnVdbjHNZDiBPt1b3reB9WJ6xr6WHoQ3DG3FI9ucyss1cck_VTd0DnLYBQJDMprGJ5f92qAjbHEvvtR_4piYKR2rz23uECW08bfh0AM1Leg8jc1LfzWohcBYcdGOCu5Cfb8rjQ12QAufSjqYXuPKnVDY5WMAyM8_yUKxujMzQYKLXj-i9xZSP5hsrqw_-7_ouvSJzy13JXMq7lBuCxelTjqrgVmTc-WMHVDeg8AwMYy7n82HxKfpvuUtBE7jVGzJJZ0ZZ-p1NFAfQhJ6N3EQda25sXEGccFqiny3yyvZLSuPRKLNLwhUHKvoWbv9KF7jHY7isVXonrdqHsT_zeA.zOZmNu7OXmVLu_uq.05H1jG2FKY2v5skXNVgZpw4yrnGTx92Y0yfiOELnWR0pqjSkT2i3CZwc6AFTqtDSuuhQOyUaPUeeZf078XGWl67yyxG-TxV32eh_wNMobNsdmmsHvC4R9ZBWFtRGD9T6RZmiQ1GqBmL5EHzkjUMJzNOFe8369-XMGRait9BFYA0xE9wCly72T8QnwCzI3ACrg8nRJS7GD3C7IDeBkSoEKFDr-F7t0CD_ITCWAJVMvPndAjpB9S19uJzEPiOWukfGB_ixkQZWj8ELcJ9B0jeYEbozaUDGhTrITqTC7n7Ng2LvDdvyViKcuzO0f0SjQ6p7-kAnBJTrNJ12_rPSqf-DczTXTLt_o8L4vJ4q6iH0MFCMqGxGNMRkx-qwbXdg38MQkolqNEijvwtKx0quMwfyRnyNYXBVS98S4r0GUWpJE0U6bZialaxFXbImzxjAKQbjuVnpyWt5EcwEZ1rolJa5AMNcKtr3Cdsr7wMrd6ePhXUL9WfcYoiEJYS24fFT4XNoftNNBc6nK1pdEXRrBTiO0ZN4CgywO0TWWttKDw9-FiTocNEXlTfQFdLmNpCnMa4uL0XeCnPR2NZ-I03BWBKuA1RqFcDL4brg0fjH3raXSgQNtKRR9_14Yd7QK5-l0Gpe-6UsIVwL3w15UmWYCtss9jang4fLe6a36xHbfxXrRdxkNLLuHVL0tl-lZEYmr-wigiSZePpvugtOO0Iw93zosAsrTQVOrHFR9qdqeEq7XnunbAkf59BNmMgmBvC_qrNArsS7EJ1PV58vtRVtd95fH7yZzpfR4FEoN7O17QyMxoQxS0P-TIaWlAnPsnqDHU9vFZlRtpOrE2Z1wVcDW6fQreVFhSP193SBlyqCG25KeRd6CgMYtL-y12RB2NOuwF6htClW3QRaMoRP663gZHO31cbjQNq3R1be43wGXH-EPX6vCayPdRAOLV60dOh0tA_oOBnsjvm862k33tEWEKZUhW_4HWFw3LZUZa-_yyQ4w_FqBCCpyDfva-erwB--VaCIf240QgCBXZY_dQ9cIeISsoIxWhWr-7EtG7FMlPpPAaH-dKtF9lpgYVWvQ08P3DWRka3ga85WC-DOnNRyXRXsOmxic85wMOj6V1SgUhf-7YFpD2nUw3frw2RvSgeAdhoeJonAVle-56JuJtO7U9HcvNIYjzFHE9E_W3BlCxDMaKJ5NKnMyzqn5gwLmpQFfwl29D8747jM-ZMsXJ8ZdiTu5nsEJHydQIOeN0AEf3mlvjuSs1Q4CkflQ-35YiReoKZM6TJJKCEaEvRFm3adNk7yHlWTM4vRyGbqV-PnRW41SMFR7i5FNq18gR1uV4nd0KSRYE0pdbVRerPRwkC_5m-0D_cCBGu-orQ6jVXM-sLQsLD4LegCXRt3rqURSKED6vWWwp8wRMTvz_BXfEBcGjgCO_YGWT49hbWKg60Efo7yvnucOC3FmOS2FXk8gKyfQ9j_DCRuEhxYvbk9InbCrluXDqUm7dz9D-fNHYjbVavGyG9cRxUpFsheNXqyau5wVhlPPYZENEzxicoimLshpZ81styHdMFjc1Zz4HYKF-fth2NU70ECTPSaPTa2HkYk4SoKoAIOtCJbWNIgARyLFxgDre6Y1nw2tgp0O2Shiaolf4hOYUjwACS8fsrMukcbnVzuB7kLHmw_RAmd_4hQiJ-lwF8-UcaOvRxCszJErWBG4cgyYrj3jEWTXh9VmbGfP_B7sS6mEHkv0QW8X7PiIIZrgVqHrBbOSwoLSL2t-1kPQ0DJGeaTn3NmPVvijlJH5-J23Dpe9SG_LtOqzsS5wEvxYESnRvAxw88fqOC2adwGTd0nI8bRCvfQrEzN9DxUMCrXAqbJhIvjwh43muKs18ygIJ_JL_bjTfHSmoianyG0VMG1L7HC0TPdXgLEsffwq8GYqRlTh__ADpZ8GtT_Y6QTwmeNYy711JyVoPkh_V81DEWSpEUeAIfp_nps96_PK22NlRN4RbsWrqjpBezMv2yQL9Jv-XwevnGAheS5qubN5zMFYkq6u6oVBLWVBXb_YnUPmVWOV4sfVd3joS6qd1zXzwqVmEnFUro_f22xCfD1a_S_8wpVtZP88GqLF6S_sva7HEWAzO27vV6WJImzpCJrHdt_gPGDtCL_hPu14jcYM4OvWunU5izLFLckSJcJvGSWkJ58OOPK-kTSUtg3Cwt6OZrqhGCirsixM4m6DSuZzwV_xkzEsxa8vVPbNCEp0G1INd2nmiCtP2zY9Opc5o8_v94V7NYD4ayiVZMb4vfn67p_nxVltoRscJXPQTCQhAbJN37j-l8vPRbHeFC_PEZpbD7VRNCc_ureanMcnQ2FiIEKTdqpJCoFZ1jgZ5L8Z1VsNIYj1MkLOHGrebbWcGBoE0Nz-QPndStYZL-66HTWOYTJPeP3_XzxsOiSkjWWRKrfs-j8GXCLMQVDbZLPnBhWA4o-aH9ds4FUNJbRxNFgbqT8hjE0btEi3cPUf3pSumaWjOMnR0Oqw7dydaDWoE5Zba2Ywn97l0a9UuirMgCqJ7h0CIIPqnMCQAPKjC0GZYLsq9rHg-gwnCNCGcfnJqVq8-hXgF5hr7k1AcwOO9naOviEgCQ23vt6duDztxa91pJf6mU8fr1SVQ4wOYnnfs-vhS-Dk4gHoVxppMb4S0xYd3yLuQ2970ii394uOMMRUfMf1_oG-d_ouXCRfJm0MDyMVlU5K-ICzmYPUG0z3FwSgTpRGKink0VxSI-8BD4onWNHPI2984CTtFzFtnmrB6dmyPGXH5YMakVJxepxXJfGIf4v6trr89-847pmAGEQys11EmKeED-V5_6UfMtGsK2tKpM0Zta88thcT1S2fdLs9yfsUxzCeM5x4h2b11QILpzdCBIUL5J_I2bL0djTl1KfFNlK8wX7haJTN8iVGc5qZwynCv4fTC7PeUcEuJul5lZglXxwmab-IEksahSqXj2PsPeDvzmCfBwneJaDigvbqwjGoPAX97hc4xxOCMdxmd-KlvVo2HufMCi_JXJ8tMGQCtGfypM6prUPBCqO2I7jUeCxIN2eqeoTKnxKwTY_hvM6rJPyaeJ2LtqP6qjlVhjmrzSOv6f3nlCACnoHdkKjrkhFkX-7Pzf5GsUwPUpZyKuRKwDNg2wV0KSwAQL8ee9NExtfQ-mCowK4nOQ5x0oS2RaiHDFEcSEXdsovxonQGqzELVGWM3M1uG6a1LokXGbbvrxy82A5dgywY27oaR1uOIrgaKruB9qK_gJ7QQPxzok1PGO-FSQUgXq_GJl9EYtle1BAfgNcJ5XijsgWS0Qjn_JqXpfMVw0pZkYDNIS_RpGkWsrlFjeGF0IG27FY7YcKQIiwX5qj4vziXkghN3GgrASDm4E7dp-PwBFHTgmo2yzTprcNzFeGK6UBRycCEBULhu5Gj1fJtcQyesf-palCnu4NPP5CVDLkwL55MvRUrlPwGVcjk0nGbvrLdYxNhoKE1pmJBWjEujSlLlIUdqcZgsGYsOcgyy-nBgr26tIzMtYDHknB9EMHp8jYIZOUqcNXdOOj90qqpnca4R2pgmpi1CXs5i0uGDHtchk6Xeqse96DwOrxViOgrTDUQ9uOi0jPKt2WF17OGY4GawhxnKjGbcSQ8cVbFG8wMo7HL2JbK4idmr0ExYLOW8340E5V0zMLfatqk7Iiak6v0pogrrxaXapaIg89yttOWDgPfnWvowsR6iJKxQKoT7tP1q6o496GHx6Txsid7J72A0DZu6WSuZgBSFTrSCPERfLyYEq-gdOY547oTFznh4UXobC4yy-sgymkDs1bi9CtBvqC_jBzJIgz4jYZ2X_bbuIl-33k6JH5LbXT0343FXrKogjKHacEaOc6LMUk-_Fo4_2rRwR97A4jkY-rMa-IHmikNDlBqyBXBl120uTpH9WPC9FWvAyq3dwhW-NTEK0IoaEz2WCqt0IzSBkahfEZ3BCFCNeguRvzwAGLY_pBPHWS47S6adL-3w5gIToIXhK2h_Q_pakY2jlPwyi0HS0nGjYkYixT7IjkMU4Y5w28KuSylEuZDeneYiIjVFlLdSe7aGc1zyTVnnA8FaD0xeAZM7MqM4A1pS0pSzMdUswT-xnIt0ghrI54ybGerknVxUGDTb9GUCnwoVyg5MDf04oYLLR9TBgmnub6Cbx5x7YCU_Ros_QbPuzSeijxxt-N3H4cC7stp4QLcI4NPwMWV71HidASKUzUYGWGPz5tFxdzG0_uJPHEG5_bIagjVMnzxhyIkCov7EfVcRVmvIX0iTPvT2fBGaUf_2y1BjWOaur1-jpOm3bc-sVbNSFu3n0MCEuQZtE3Ptk_78nA3cz3dlqOJEDB1R27T1UluYqJE0yFju8O7Wqcv72S7CYWV_jn3FPA9N1NYdImDCc7qCXjzkWIi2vbcc8jNtRi_AIUhq1xWFvXv69z__0OVL9UjlNj6LZwlg_rSnRQmYoEeeciJYOZPh5yqxB18WxUW4PW0XMNWPe5JejHBNc_2R8YdsXofYK5NuavRJ3RnB5RVpugMriMKgXx9QudtukNCRx_gypc6WRmEh39h1CivM1xVOa7BkE2Fq8yzUNgQI2CoqZjSnooHuiCROdSTQEqSYHxruQEzzyHuZYZ8AymCbFABNSSDJTngSP6NAzIeb390_jcQxG5JLuPbwSCqwQ9TntetL_c0SoLs_0ZHZdNgmorF56zXCbQtmkQeTA8JO66RmYQMgMqrrvgA-WF1p7nK9w--h8yRNaJ-BT_o2nFwuow6bB8u-nIn14oPbgKd0u-687NKpSa8UftPe5eJtUbcN3DP3MW6KmtOWq_eJ0aULh11gs2Lx1VAh1zYd6XHEr9GyXnyoHseuEIcOm8utcb0fMMMMeUAzsceL79vlLk1TkV-RgpGU7wiaTPubkG-lzr2MPOcGzWvDL-l-rrqxx-8P4HForypS6AJLV2s6p-eWJM9LSfrpgXF5bWP3hw07cdLQ76CDhbFsc5YtsCJ0iPUhWxMnEOjsBPX-VlyIzNUzWMsxbwBloYceK0VAAysx-fNnsOgFbCuMp7VS7-gOvy0RZR-kVxTT-A1bumH2_0AwVGGYvv8yp_s58qAM6QosItx8vPGaEFLZxqDT7Vj_u2XuDpByyooQYtsxzKTpFKxLFUFMavJ_dFPRlWtsU0VbyW8T-rsbQJc1Nr_-QpG4YOgyuI8ailchp61XxNuzNpZK7bV2j8j9_pUlwJDqoaponWhaJUDAZ-g-xfjCKfH6twHH605929H_kIo3cuhcA0R0iVVNGn_r_K13eZov62QSXMPRlhmb2qGvNAq38x2jDh-XIjc7-XWGMqWTeALHVnfMDGvr_Lns6Gxl0YmAY74F92s9AQnJabL5kDM5dBivTj7EwMAlxilux5x0ZCu0-bcxrz-CB6nJIBBXcJnSUDRP_xrt5e7iXF31bpVfgGpvSAFjavTzwlAEEhEl58IRnikE7m-D0FzQbKF5O5bJ57hbxhtrQJ5MSE-vmKkVmwCtSkAe6rE_dd6q8HWAAXYIZQrtTVBuuQ9M76WUP_mPaBSRIdl2mqpteajtfPMYklPmolwnGwU4f7oGT52g0IdYlr447NEIxKuMhd14wm2boQbgA9tM0VWIseMBeiceXbPB2673_mwIvZHdXzWqVk821Rsc91MVBfVi3CrgKQDK6Y9Ae_PJQIHAmkXS0xNzTO5ZNZFp54jytH4ZWKs422p8U6LgePJ9RXy86TQ5IkX1OL9gq3bd01e5NCzMq1jPmJuZDLvS0-TG48fp68dTgw5TM1ERpoum3j_yySa90JtZni02KxqAX7783zvkxAQVUdXqXN47dGvRULMIz35V9wwD5fnExcaqgSfqQD1aYVLzxWGLXP6f-Qt-4Umr8pZxQhiJoZTAFAdVLPQU7ug57QKDine-jx2Yprwjk64rNYRywUzDMn5IA1l8g5zDPKWTBYChXfU80gBg.Kj-yVqAEJbiN16PfJ9I25w', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', '{\"identifier\":{\"system\":\"https://www.tmh.in/bundle\",\"value\":\"f3f964cc-ca80-4b6a-a465-4bd644d42b0f\"},\"entry\":[{\"resource\":{\"insurance\":[{\"coverage\":{\"reference\" :\"Coverage/COVERAGE1\"}}],\"identifier\":[{\"value\":\"req_70e02576-f5f5-424f-b115-b5f1029704d4\"}],\"item\":[{\"diagnosis\":[{\"diagnosisCodeableConcept\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"cod e\":\"E906184\",\"display\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}],\"text\":\"SINGLE INCISION LAPAROSCOPIC APPENDECTOMY\"}}],\"productOrService\":{\"coding\":[{\"system\":\"https://irdai.gov.in/package-code\",\"code \":\"E101021\",\"display\":\"Twin Sharing Ac\"}],\"text\":\" twin sharing basis room package\"}}],\"purpose\":[\"benefits\"],\"created\":\"2024-01-19T10:55:12+00:00\",\"priority\":{\"coding\":[{\"system\":\"http://terminology.hl7. org/CodeSystem/processpriority\",\"code\":\"normal\"}]},\"provider\":{\"reference\":\"Organization/GICOFINDIA\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequest.ht ml\"]},\"patient\":{\"reference\":\"Patient/RVH1003\"},\"insurer\":{\"reference\":\"Organization/WeMeanWell01\"},\"enterer\":{\"reference\":\"Practitioner/PractitionerViswasKar\"},\"id\":\"dc82673b-8c71-48c2-8a17-16dcb3b035f6\" ,\"text\":{\"div\":\"<div xmlns=\\\"http://www.w3.org/1999/xhtml\\\">ABSP</div>\",\"status\":\"generated\"},\"servicedDate\":\"0026-12-13\",\"facility\":{\"reference\":\"http://sgh.com.sa/Location/4461281\"},\"resourceType\":\"Cove rageEligibilityRequest\",\"status\":\"active\"},\"fullUrl\":\"CoverageEligibilityRequest/dc82673b-8c71-48c2-8a17-16dcb3b035f6\"},{\"resource\":{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding \":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"Narayana\"}]},\"value\":\"HFR-ID-FOR-TMH\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"text\":\" Bannerghatta Road, Ben galuru \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"BSP Role Mock User\",\"id\":\"WeMeanWell01\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/WeMe anWell01\"},{\"resource\":{\"identifier\":[{\"system\":\"http://irdai.gov.in/insurers\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"AC\",\"display\":\"GOVOFINDIA\"}]},\"value\":\"GI COFINDIA\"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Organization\"]},\"name\":\"Demo Payor\",\"id\":\"GICOFINDIA\",\"resourceType\":\"Organization\"},\"fullUrl\":\"Organization/GICOFINDIA\"}, {\"resource\":{\"identifier\":[{\"system\":\"http://gicofIndia.com/beneficiaries\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"SN\",\"display\":\"Subscriber Number\"}]},\"value\": \"BEN-101\"}],\"address\":[{\"country\":\"India\",\"city\":\"Bengaluru\",\"postalCode\":\"560056\",\"text\":\"#39 Kalena Agrahara, Kamanahalli, Bengaluru - 560056\",\"state\":\"Karnataka\"}],\"gender\":\"male\",\"meta\":{\"profile\":[\"h ttps://nrces.in/ndhm/fhir/r4/StructureDefinition/Patient\"]},\"name\":[{\"text\":\"Abhishek\"}],\"telecom\":[{\"system\":\"phone\",\"value\":\"9620499129\"}],\"id\":\"RVH1003\",\"birthDate\":\"1960-09-26\",\"resourceType\":\"Patient \"},\"fullUrl\":\"Patient/RVH1003\"},{\"resource\":{\"identifier\":[{\"system\":\"https://www.gicofIndia.in/policies\",\"value\":\"policy-RVH1003\"}],\"subscriber\":{\"reference\":\"Patient/RVH1003\"},\"payor\":[{\"reference\":\"Org anization/GICOFINDIA\"}],\"beneficiary\":{\"reference\":\"Patient/RVH1003\"},\"meta\":{\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-Coverage.html\"]},\"subscriberId\":\"ABCD1234\",\"id\":\"COVERAGE1\",\" relationship\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/subscriber-relationship\",\"code\":\"self\"}]},\"resourceType\":\"Coverage\",\"status\":\"active\"},\"fullUrl\":\"Coverage/COVERAGE1\"},{\"resource\" :{\"identifier\":[{\"system\":\"http://abdm.gov.in/facilities\",\"type\":{\"coding\":[{\"system\":\"http://terminology.hl7.org/CodeSystem/v2-0203\",\"code\":\"MD\",\"display\":\"Medical License number\"}]},\"value\":\"DOC-123/456 \"}],\"meta\":{\"profile\":[\"https://nrces.in/ndhm/fhir/r4/StructureDefinition/Practitioner\"]},\"name\":[{\"text\":\"Dr Viswas kar\"}],\"id\":\"PractitionerViswasKar\",\"resourceType\":\"Practitioner\"},\"fullUrl\":\"Practitio ner/PractitionerViswasKar\"}],\"meta\":{\"lastUpdated\":\"2024-01-19T10:55:13.300+00:00\",\"profile\":[\"https://ig.hcxprotocol.io/v0.7.1/StructureDefinition-CoverageEligibilityRequestBundle.html\"]},\"id\":\"4b35c99b- 4081-46c6-b927-98720d8ac8a6\",\"type\":\"collection\",\"resourceType\":\"Bundle\",\"timestamp\":\"2024-01-19T10:55:13.300+00:00\"}', 'Approved', '{}', '1705661714568', '1705661715600', '...[on_action_status]...', 'c3e73251-dffb-446e-a028-e0748bd1abdd', '9620499129', 'Pending', 'e-ce224fd0b737', '1234', '1234', 'Pending', 'ABSP', '{}', '32329', 'ABCD1234.', 'Abhishek.', 'medical')");
//        String requestBody = getCoverageEligibilityRequestBody();
//        MvcResult mvcResult = mockMvc.perform(post("/"+ api_version + "/coverageeligibility/check").content(requestBody).contentType(MediaType.APPLICATION_JSON)).andReturn();
//        MockHttpServletResponse response = mvcResult.getResponse();
//        int status = response.getStatus();
//        assertEquals(400, status);
//    }
}
